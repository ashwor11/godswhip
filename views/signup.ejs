<!doctype html>
<html lang="en">
  <head>
    <%-include('./inc/head.ejs') %>
  </head>
  <body>
    <%-include('./inc/nav.ejs')%>
    <div class="container mt-3"> 
      <small class="signError"><% if(error){%><%=error%><%}%></small>
    <form id="form1" action="/user/signup" method="post" onSubmit="return validation();">
      
      <div class="form-group">
        <label for="registerUsername">Username</label>
        <input type="text" name="username" id="registerUsername" class="form-control signInput" placeholder="Username" aria-describedby="helpId">
      </div>
      <div class="form-group">
        <label for="registerPassword">Password</label>
        <input type="password" name="password" id="registerPassword" class="form-control signInput" placeholder="Password" aria-describedby="helpId">
      </div>
      <div class="form-group">
        <label for="registerConfirmPassword">Confirm password</label>
        <input type="password" name="confirmedPassword" id="registerConfirmPassword" class="form-control signInput" placeholder="Confirm password" aria-describedby="helpId">
      </div>
      <small><a href="/user/login" class="underline">Have an account?</a></small>
      <br>
      <input type="submit" id="registerSubmit" class="mt-2 btn btn-secondary" value="sign up"></input>

    </form>
  </div>
      
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    
    <%-include('./inc/footer.ejs') %>



    <script>
     function validation(){
      
      var username = onlyLettersAndNumbers($("#registerUsername").val().toString())
      var password = isPasswordValid($("#registerPassword").val().toString(),  $("#registerConfirmPassword").val().toString());
      if (!username){
        $(".signError").text("username must not consist special character")
        console.log("username")
        return false;
      }
      if(!password){
          $(".signError").text("password at least 8 character and must match")
        console.log("password")
          return false;
      }
      return true;
    
     };

     function onlyLettersAndNumbers(str) {
      return /^[A-Za-z0-9]*$/.test(str);
     }
     function isPasswordValid(password1, password2){
       if(password1.length < 8){
         return false;
       }else if(password2 !== password1){
         return false;
       }
       return true;
        
     }
    </script>
  </body>
</html>